# DB 9주차-1

Ch6. 데이터베이스 디자인 using E-R모델 (1)

2)
데이터베이스를 설계하는 전반적인 과정을 다룬다.

entity-relationship data model(E-R 데이터 모델)을 다룬다.
- 하이 레벨 데이터 모델 중 하나
- 엔티티가 무엇이고, 엔티티 간의 관계를 어떻게 설정할 수 있을까에 대해. 각각의 릴레이션들을 엔티티라고 생각하면 된다. 서로 연관있는 릴레이션들의 관계를 어떻게 명시할 수 있는지.
- 데이터 스키마 디자인을 하는 방법

4)
전반적인 데이터베이스 설계를 어떻게 하는지

5)
Design Phases
데이터베이스를 사용하는 사용자를 고려해야한다.

첫번째과정)
데이터베이스를 사용하는 사용자의 요구사항이나 필요로 하는 데이터를 규정하는 것이 필요.
	-> 사용자가 원하는 요구사항이 뭔지 파악해서 잘 명세.

두번째과정)
데이터모델을 선택. (여기선 E-R모델을 사용한다.)
모델에 사용자들의 요구사항을 적용시키는 작업 필요.
	-> 사용자들의 요구사항을 conceptual schema of the database로 바꿔야한다. 	즉 E-R모델로 바꿔야한다.

functional requirements : 실제 응용프로그램에서 필요한 요구사항 명세서.
	데이터에 적용될 오퍼레이션이나 트랜잭션이 어떤것인지 알려주는 역할.

6)
마지막과정)
앞서 만든 데이터모델을 데이터베이스에 구축.

- Logical design 데이터베이스의 스키마를 결정하는 단계. -> 우리는 이것을 어떻게 만들것인지를 중점적으로 배우게 된다.  실제 사용되는 릴레이션 스키마를 어떻게 설계할 것인가를 고려.  2가지 관점 존재. - 비즈니스적 관점) DB의 어떤 attr가 저장되어야하는지 결정해야함. 얼마나 효율적으로,실용적으로 할 수 있을지 결정해얗마.  컴퓨터사이언스적 관점) 구조적인 관점에서 릴레이션이 얼마나 잘 설계되어있는지. 릴레이션 스키마가 어떻게 구성되어있는지. 여러가지 릴레이션에 attr를  어떻게 분배시켜줄것인지. (중복을 최소화하는 방향으로)
- Physical design 데이터베이스에 어떻게 저장될지, 물리적인 부분을 다룸

7)
데이터베이스 스키마 설계 시 주의 사항

1. redundacny를 피해야한다.
inconsistnecy : 데이터가 중복이 많아지면 초래할 수 있다. 일관적이지 않아질 수 있다.
	-> 중복된 데이터를  업데이트할 때 여기저기 다 업데이트해야하므로 일관성이 깨질 수 있다.

2. Incompleteness : 불완전성
표현하고자하는 것을 데이터에 적절히 표현하지 못하는 경우.

8)
Design Approaches

ER모델
ER모델같은 경우는 엔티티와 릴레이션쉽의 관계를 모델링 한것.
Entity : 객체(object)인데, 다른 오브젝트와 구분되는 특정한 객체. 주로 attr의 집합으로 표현된다.
Relationship : 수많은 엔티티들 간의 관계를 결정해주는 것.

이 2개를 시각적으로 표현한게 ER diagram

Normalization Theory : 설계가 좋고 나쁨을 공식화하는 방법을 배우게 된다. (7단원)

9)
ER모델

10)
ER모델 - 데이터베이스 모델링

(첫번째라인 오타 : mode -> model)
ER모델은 데이터베이스의 스키마를 명시하는데 사용.

ER데이터모델에 존재하는 개념 3가지
- 엔티티들의 집합
- 릴레이션쉽들의 집합
- attribute

ER다이어그램을 통해서 논리적인 구조를 시각적으로 표현할 수 있다.

11)
Entity Sets

엔티티 :  다른 객체들과 구분이 되는 오브젝트.
ex) 특정한 사람, 특정한 회사, 이벤트 .. 등

엔티티 셋 : 엔티티들의 집합. 그냥 집합이아니라 같은 속성을 공유하는 같은 타입의 엔티티 집합.

각각의 엔티티들은 attr의 집합으로 표현할 수 있다.
ex) instructor = (ID, name, salary) …
이 attr을 통해 엔티티셋의 엔티티들이 갖는 특성을 알 수 있겠다.

attr들 중에서 primary key를 설정가능하다.
엔티티 셋 내의 각각의 엔티티들을 특정지을 수 있는 attr로 지정해야겠다.
그 엔티티 만이 갖는 값으로 지정해줘야한다.

12)
엔티티 셋 예제

13)
엔티티 셋을 ER 다이어그램으로 어떻게 표현할까

다음과같이 사각형으로 표현.
그림참고.

14)
Relationship Sets

릴레이션쉽 : 엔티티들 간의 관계를 설정해 줄 때 사용
ex) student라는 엔티티와 instructor라고하는 엔티티가 있으면, 그 사이의 릴레이션쉽을 advisor로 표기

릴레이션쉽 셋 : 릴레이션쉽들의 집합.
정의가 복잡하게 나와있지만,
같은 유형의 릴레이션쉽들의 집합.
n>=2 : 2개이상의 엔티티들의 수학적인 관계를 수식으로 표현했다.
E : entity set
e : E에 포함된 개별적인 entity

15)
릴레이션쉽 예시

릴레이션쉽 셋은 저 선들의 모음.

16)
ER모델에서 릴레이션쉽을 마름모로 표현.

17)
엔티티에 어트리뷰트가 들어갈 수 있다. (당연한거. 릴레이션에 어트리뷰트가 들어가는거니까)

그런데 릴레이션쉽에도 어트리뷰트를 부여할 수 있다.
단순히 관계만 부여하는게 아니라, 다음과같이 날짜를 부여해서 두 개의 엔티티간의 관계가 언제 맺어졌는지.. 등 표현 가능

18)
그 릴레이션쉽의 attr를 다음과 같이 표현

19)
Roles
릴레이션쉽에서 엔티티가 어떤 일을 하는지 결정해주는 것.
ex) instructor는 student한테 advisor를 해주는 역할

두 개의 엔티티가 관계를 맺고 있을 때 굳이 롤을 명시해줄 필요가 없다. 릴레이션쉽에서 알 수 있기 때문. ( 물론 그걸로 알기힘들때는 명시)

20)
릴레이션 셋의 degree
degree : 차수. -> 보통 그냥 개수를 의미. 여기서는 릴레이션 셋의 존재하는 엔티티 셋의 개수를 의미.
일반적으로는 binary relationship관계 (두 개의 엔티티가 연결)

21)
2개 이상의 엔티티가 연결되는 경우도.. 있겠지만
매우 드물다. 거의 이렇게 하지 x

22)
Complex Attributes
ER모델에서 attr를 어떻게 설정할지.

23)
Complex Attribute

attr의 타입
- simple attr, composite attr simple attr: 더이상 나누어지지않는 attr ex) ID, 학번 composite attr : 쪼갤수있는 여지가 있는 attr ex) 이름 -> 성 + 이름
- single-valued attr, multivalued attr single-valued attr : 값이 하나 밖에 없는 것을 의미. ex) ID같은 경우 유니크하기 때문에 값이 1개이다 multivalued attr : 값이 여러개 일 수도 있는. ex) 어떤 사람이 핸드폰 번호가 여러개일 수 있다.
- Derived attr 존재하는 어트리뷰트(저장되어있는 어트리뷰트)는 아닌데, 다른 어트리뷰트를 통해 파생될 수 있는 어트리뷰트 ex) 생년월일 데이터가 있다면 -> 나이 정보를 파생시킬 수 있음

Domain : 각 attr에서 허가된 값들의 집합.
ex) semester이라는 attr의 domain : {Fall, Winter, Spring, Summer}

24)
Composite attr의 예제

25)
attr를 ER다이어그램 상에 표기하는 방법

ID : simple attr, single-valued attr
name : composite attr

{phone_number} : 이 표시는 multivalue attr를 의미

age () : 이표시는 derived attr를 의미

26)
Mapping Cardinalities

27)
Mapping Cardinalities
릴레이션 셋을 통해 연관되는 엔티티 갯수를 지정할 수 있는 것

예제를 보면서 설명하는게 빠르다

총 4가지 타입 존재.
![DB 9주차-1](images/DB%209주차-1.png)

28)
예제

원 투 원은 왼쪽, 오른쪽이 1:1로 매핑되는 관계
	관계가 존재하지않는 것도 포함

원 투 매니는 왼쪽, 오른쪽이 1:다 로 매핑되는 관계
	
29)
매니 투 원

매니 투 매니

30)
매핑 카디널리티를 ER다이어그램 상에서 어떻게 연결하느냐

one 부분은 화살표로 연결,
many 부분은 실선으로 연결

31)
one to many의 경우
1명의 instructor가 여러명의 student를 갖는다.
한명의 student는 최대 1명의 advisor를 가질 수 있다.

32)
many to one

33)
Many to many

34)
Total Participation
그냥 직선이아니라 두줄 직선으로 표시.
이것에 해당하는 엔티티 전부는 최소 1개이상의 릴레이션쉽을 가져야한다.
ex)모든 학생은 최소 1명의 instructuor를 가져야한다

partial participation
몇 개의 엔티티는 관계를 안가질 수 있다
ex)교수는 꼭 지도학생이 있는 것은 아니다.

35)
카디널리티를 숫자로 표현

l : 최소 카디널리티
h : 최대 카디널리티
-> 최소 몇개의 관계부터 최대 몇개의 관계가 존재할 수 있다.

미니멈 밸류가 1이다 -> 토탈 피티시페이션
* : 제약조건을 주지않는다.

	
